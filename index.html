<!-- You might want to add additional HTML elements to ST.
    It's good practice to separate it out from your code -->
<div class="chat-history-extension-settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>Chat History Optimization</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <label title="启用功能" class="checkbox_label" for="extension_toggle">
                <input type="checkbox" id="extension_toggle">
                <span>启用功能</span>
            </label>
            <div class="marginTop5">
                <label for="keep_count">
                    <span>正文深度</span>
                    <small>（会保留的AI最后回复的完整消息的数量）</small>
                </label>
                <input step="1" value="3" max="100" min="0" class="text_pole" type="number" id="keep_count">
            </div>
            <div class="marginTop5">
                <label title="错误统计">
                    <span>人物总结失败的楼层: </span>
                    <span id="chars-failed">无</span>
                </label>
            </div>
            <div class="marginTop5">
                <label title="Token统计">
                    <span>Chat History Token Count: </span>
                    <span id="token-count">0</span>
                </label>
            </div>
            <div class="marginTop5">
                <label for="char_prompt_textarea">
                    <span>角色总结JSON模板</span>
                    <small id="char_prompt_validity" style="color:#888">(有效性检测)</small>
                </label>
                <textarea id="char_prompt_textarea" rows="18" style="width:100%;font-family:monospace;resize:vertical;">
                </textarea>
            </div>
            <br />
        </div>
    </div>
</div>